import { useState, useEffect, useMemo } from 'react';
import './AsciiPortrait.css';

const ASCII_PORTRAIT_RAW = `@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%@@@@@@%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@@@@%@@@@@@@@%%%%%%%%%@%%%%@@%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@@@@%@%%@%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%@@@@@@@@%%@@@%%%@@%%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@@@%%@%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@@@@@@%%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@%@@@@@@@@@@@@@%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@@@@%%@@%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@%%%%@@@@@@@@@%@@@%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@
@@@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%@%@@@@%%%%@@@@@@@@@@@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@%@@@@@@@@@@@%%%%%@@@@@%%%%%@@@@@@@@@@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%@@%%%%%%@@@@@@%@%%@@@@@@@@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@@@%@@@@@@@@@@@@@@@@@@@@@@@@@%%%%@@@@%%%@@@%@@@%%@@@@@@@@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@@@%%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@%%%@%@@@%@@@@@@%%%@@@@@@@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@%%%%%%%%%%@@@@@@@@@@@@@@@@@@%%%%%%%@@@@@@@@@@@%%%@@@@@@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@%%%%%%%%%%@%%%@@@@@@@@@@@@%%%%%%%@@@@%%@@@@@@@%%%%@@@@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@%%@@@@@@%%%%%%%%%%@@@@%@%%%%%%%@@@%%%%%%@@@@@@%%%%%@@@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@%%%%%%%%#%%%@@@%%%%%%%%%%%@@@%%%%@@@@@@@%%%%%@@@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@%@@@@@@%%%%%%####%%%%%%%%%%%@@@%%@%@@@@@@@@@@@@%%%%%@@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%@@@@@%@@@@@@@@@%@%%%%%##****####%#*#%%@@@@@@%%@@@@@@@@@@@@@%%%%%@@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%@@@@@%@@@@@%%@%%%%%%%##****#%%####+#%@@@@@%@@@@@@@@@@@@@@@@@%%%%%@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%@@@@@@%%@%%%@@%%%%##%##*++######**#+#%@@%%%%%@@@@@@%@@@@@@@@@%%%%%@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%@@@@@@%%%%#%%@%%##%###*++*##*+*++++*#%%%%%%#%@@@@@%@@@@@@@@@@@@%%%@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%@@@@@@@@%#**#%%####%%%*==*#*+**===+##%%%##**#%%%%@@@@@@@@@%%@@%%%%@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%@@@@@@@@%#***##***###**++****+==-=*#####***##%%#%%@@@@@@@@%%%%%%%%@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%@@@@@@@@%#########%%%#*++**++=---=+*#%%%%%%%%%####%@@@@@@@@%%@%%%%@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%@@@@@@@%%#*+++++**##%%%#***++=--=+*#%%###*****++*##%@@@@@@@@@@%%%%@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%@@@@@@%#**+++======+**##**+=--=+*###*++===++++++**#@@@@@@@@@@%%%%@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%%@@@%%#**++==+****++++**+==:-=+++++++****+=++++*+*%@@@@@@@@%%%%@@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%%%@@%#*+++**#*#%%%=++=-++=-::-=+=-+++#%%#*#**++=+*%@@@@@%%%%%%%%@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%%%##%*+=-=+++++++====--==--::-===-====+++++*+====*%@@@%%%%%%%%%%%@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%%%##%*=----==========--==--::-===-==========----=*#%@%%%%%%%%%%%%@%@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%%%#*#*+---------------===--:--===--------------==+#%%%%%%%%%%%%%%%@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%%%#***+=--------------===--:--====-------------=++*%%%%%%%%%%%%%@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%%%%++*+==------:::---=+==-:::-====------------==+*#%%%%%%%%%%%%@%@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%%%%*=*+==------::::--===--::::-===------------==++%%%%%%%%%%%%%%%@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%%%%%***+==-----------===--::::-===-----------==+**%%%%%%%%%%%%%%@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*++==----------=**#+===+*#*=----------==++*%%%%%%%%%%%%%%%%@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*++==----------*#########*=---------==++*#%%%%%%%%%%%%%%@@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#*++===--------==+**##*+==-------====+**%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#*+++===----========--====----=====+**%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#**++=========---------==========++*%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#**+++==++***********###**+====++*%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%#+***++++++=++++=====+*++===++++*#%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%+=+****+++++++****++****+=++++**#%%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%*--=+****+++++*#*#####**++++++****#%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%%%%%%*=--::--+*#**++===+++****++====+****+*%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%%%%%#+-:...::::::-=*##*++==----------==+****===+*%%%%%%%%%%%%%%%%%%@@@@@@@@@@@@@@
%%%%%%%%%%%%%%%%%%%#+-:.......::::::::-=*##*++==========+***#*-----:::-+*%%%%%%%%%%%%%@@@@@@@@@@@@@@
%%%%%%%%%%%%%%%#=-:...........::::.....:-=*###***********###=::::-::::.::::=+#%%%%%%%@@@@@@@@@@@@@@@
%%%%%%%%%%%#+-:................:.........:-=*#############+-::::::::::::::::.::=+#%%%%%%@@@@@@@@@@@@
%%%%%%%#*=:...............................::-=+#########*-:..::::::::::..:::::..:::-+#%@@@@@@@@@@@@@
%%%%*=-:.....................................:--=+*###*-:....:::::::.:::..:::::::::::::=+#%@@@@@@@@@
#+-:............................................:=**+*+:.....::::::..:::....::::::::::::::-=*%@@@@@@
..............................................:=#%%%%%%@*:..::::::..:::::....::::::::::::::::-+%@@@@
...................................:.........=#%%%%%%%%@%#=::::::....::::.....:::::::::::::::::-*%@@
::..................................:......:*%%%%%%%%%%@#-++:::......::::......::::::::::::::::::=%@
.:...................................::...-+-=#%%%%%%%%@=:::=:::.....::::......:::::::::::::::::::-#
::......................................:-:..:-*%%%%%%%%::::::::....:::........:::::::::::::::::.:::
.:...:........................................:=#%%%%%%%::::::......::..........:::::::::::::::::::
..:..:........................................::+%%%%%%%:::::::....:::...........:::::.::::::::.::::
...:.:.......................................::-#%%%%%%%*:::::::..::::...........::::::::::::.:.::::
...........................................:..:=%%%%%%%%%-::::::...:::............::::::::::::::::::
..........................................:...:=%%%%%%%%%%:::::::::::::...........:::::::::::::::::
..........................................:...-#%%%%%%%%%%*::::::::::::.........::::::::::::::::::::
..........................................::..-%%%%%%%%%%%%:::::::::::::.......:::::::::::::::::::::
:.........................................::.:+%%%%%%%%%%%%*:::::::::::.......::::::::::::::::::::::
::.::.....................................:.::#%%%%%%%%%%%%%:::....::::......:::::::::::::::::::::::
:::::.....................................:::-%%%%%%%%%%%%%%=::::::::::.....:::::::::::::::::::::::-
:::::.....................................:::-%%%%%%%%%%%%%%*:::::::::::.::::::::::::::::::::::::::-
:::::.....................................:::=%%%%%%%%%%%%%%#:::::::::::::::::::::::::::::::::::::-:
:::::....:..........::....................:::*%%%%%%%%%%%%%%#:::::::::::::::::::::::::::::::::::::-:
::::::..::.:::.:::::::::................:::::%%%%%%%%%%%%%%%#::::::::::::::::::::::::::::::::::::---
:::::::::::::::::::::::::::::....:....:::::::%%%%%%%%%%%%%%%#-::::::::::::::::::::::::::::::::::----`;

export default function AsciiPortrait({ isVisible }) {
  const [waveOffset, setWaveOffset] = useState(0);
  const [isHovering, setIsHovering] = useState(false);

  // Split portrait into lines for wave animation
  const lines = useMemo(() => ASCII_PORTRAIT_RAW.split('\n'), []);

  // Continuous wave animation - always active, more noticeable
  useEffect(() => {
    const waveInterval = setInterval(() => {
      setWaveOffset(prev => (prev + 2) % 360); // Faster wave speed
    }, 30); // More frequent updates for smoother animation
    return () => clearInterval(waveInterval);
  }, []);

  return (
    <div
      className={`ascii-portrait-container ${isVisible ? 'is-visible' : ''}`}
      onMouseEnter={() => setIsHovering(true)}
      onMouseLeave={() => setIsHovering(false)}
    >
      <div className="ascii-portrait-frame">
        {/* Wave animated lines */}
        <div
          className="ascii-portrait ascii-portrait--main"
          aria-label="Retrato ASCII de ValentÃ­n Romero"
        >
          {lines.map((line, index) => {
            // Calculate wave displacement and brightness for each line
            const wavePhase = (index * 6 + waveOffset) * (Math.PI / 180);
            const baseXOffset = Math.sin(wavePhase) * 6;
            const baseBrightness = 0.8 + Math.sin(wavePhase * 0.5) * 0.2;

            // When hovering: freeze animation and show full brightness
            const xOffset = isHovering ? 0 : baseXOffset;
            const brightness = isHovering ? 1 : baseBrightness;

            return (
              <div
                key={index}
                className={`ascii-portrait-line ${isHovering ? 'is-hovering' : ''}`}
                style={{
                  transform: `translateX(${xOffset}px)`,
                  opacity: brightness,
                }}
              >
                {line}
              </div>
            );
          })}
        </div>


        {/* Subtle glow overlay */}
        <div className="ascii-portrait-glow" aria-hidden="true" />
      </div>
    </div>
  );
}
